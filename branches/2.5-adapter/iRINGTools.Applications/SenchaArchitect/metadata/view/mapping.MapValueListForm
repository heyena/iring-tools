{
    "type": "Ext.form.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "height": null,
        "width": null,
        "designer|userClassName": "mapping.MapValueListForm",
        "designer|userAlias": "mapvaluelistform",
        "bodyPadding": null,
        "bodyStyle": [
            "padding:10px 5px 0\r",
            ""
        ],
        "title": null,
        "method": "POST",
        "url": "mapping/mapvaluelist"
    },
    "designerId": "74ae9be1-debc-4ec9-b65c-72f3107b7df0",
    "cn": [
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "objectNames"
            },
            "designerId": "50158e76-e675-41b4-8037-ab293713cd97"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "relatedObject"
            },
            "designerId": "6895e05b-ad3d-4bb4-b5e7-bf85942f7d4a"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "propertyName"
            },
            "designerId": "72432b26-ecb0-46ef-a4f3-a786a1fb925a"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "mappingNode"
            },
            "designerId": "b433308a-2bbf-46f8-8178-c8344788d150"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "index"
            },
            "designerId": "aefc1061-1552-404e-8dd9-1dd2799b49ad"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "classId"
            },
            "designerId": "a685a138-f05c-400e-bfa2-c7ead28973bd"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "graphName"
            },
            "designerId": "46c441c8-e98f-40b4-b741-653178b987eb"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "roleName"
            },
            "designerId": "a228190b-c727-40ee-a4a4-d9d3f101e701"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "contextName"
            },
            "designerId": "164e16dd-2e4e-4256-89a3-e1c6f2bdd753"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "endpoint"
            },
            "designerId": "ac1e9480-9528-4887-a952-3745bdf1789e"
        },
        {
            "type": "Ext.form.field.Hidden",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fieldLabel": null,
                "name": "baseUrl"
            },
            "designerId": "5d395eae-25de-4bbb-b10f-eaf2205f1c1d"
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "bottom"
            },
            "designerId": "6fcbf2f4-b468-43a7-a162-fb16f4768695",
            "cn": [
                {
                    "type": "Ext.toolbar.Fill",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null
                    },
                    "designerId": "d65acdf9-8463-47df-803d-40d8a8d2ae43"
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "Ok"
                    },
                    "designerId": "6c1de92d-8d45-4856-9eaa-b712134686aa",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "handler",
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "implHandler": [
                                    "me.onSave();"
                                ]
                            },
                            "designerId": "a7e6a3f1-c478-4e51-beee-2f6421ca38e2"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "Cancel"
                    },
                    "designerId": "c37ff24a-514f-4102-9e28-18d21b3bc376",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "handler",
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "implHandler": [
                                    "me.onReset();"
                                ]
                            },
                            "designerId": "8e5cbdfa-bdd2-4231-b516-29581aa241c8"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onFormAfterRender",
                "implHandler": [
                    "var me = this;\r",
                    "var pcont = me.down('#mvlfpcontainer');\r",
                    "var ccont = me.down('#mvlfccontainer');\r",
                    "\r",
                    "var propertydd = new Ext.dd.DropTarget(pcont.getEl(), {\r",
                    "  scope: me,\r",
                    "  ddGroup: 'propertyGroup',\r",
                    "  copy: false,\r",
                    "  overClass: 'over',\r",
                    "  notifyEnter: function(dd, e, data) {\r",
                    "    if (data.records[0].data.type != 'DataPropertyNode' && data.records[0].data.type != 'KeyDataPropertyNode')\r",
                    "    return this.dropNotAllowed;\r",
                    "    else\r",
                    "    return this.dropAllowed;\r",
                    "  },\r",
                    "\r",
                    "  notifyOver: function(dragSource, event, data){\r",
                    "    if (data.records[0].data.type != 'DataPropertyNode' && data.records[0].data.type != 'KeyDataPropertyNode')\r",
                    "    return this.dropNotAllowed;\r",
                    "    else\r",
                    "    return this.dropAllowed;\r",
                    "  },\r",
                    "  notifyDrop: function (dd, e, data) {\r",
                    "    if (data.records[0].data.type != 'DataPropertyNode' && data.records[0].data.type != 'KeyDataPropertyNode') {\r",
                    "      return false;\r",
                    "    }\r",
                    "    else {\r",
                    "      var ident = getLastXString(data.records[0].data.id, 1);\r",
                    "      var object = getLastXString(data.records[0].data.id, 2);\r",
                    "      var propertyName = object+'.'+ident;\r",
                    "      me.getForm().findField('propertyName').setValue(propertyName);\r",
                    "      me.getForm().findField('relatedObject').setValue(data.records[0].data.record.Ralated);\r",
                    "      var msg = 'Property: ' + propertyName.bold();//data.records[0].data.record.Name.bold();\r",
                    "      pcont.update(msg);\r",
                    "      return true;\r",
                    "    }\r",
                    "  } //eo notifyDrop\r",
                    "}); //eo propertydd\r",
                    "\r",
                    "var classdd = new Ext.dd.DropTarget(ccont.getEl(), {\r",
                    "  ddGroup: 'propertyGroup',\r",
                    "  notifyEnter: function (dd, e, data) {\r",
                    "\r",
                    "    if (data.records[0].data.type!= 'ValueListNode')\r",
                    "    return this.dropNotAllowed;\r",
                    "    else\r",
                    "    return this.dropAllowed;\r",
                    "  },\r",
                    "  notifyOver: function (dd, e, data) {\r",
                    "\r",
                    "    if (data.records[0].data.type != 'ValueListNode')\r",
                    "    return this.dropNotAllowed;\r",
                    "    else\r",
                    "    return this.dropAllowed;\r",
                    "  },\r",
                    "  notifyDrop: function (classdd, e, data) {\r",
                    "\r",
                    "    if (data.records[0].data.type!= 'ValueListNode') {\r",
                    "      var message = 'Please slect a ValueList Node...';\r",
                    "      showDialog(400, 100, 'Warning', message, Ext.Msg.OK, null);\r",
                    "      return false;\r",
                    "    }\r",
                    "    //me.getForm().findField('valueListName').setValue(data.records[0].data.record.name);\r",
                    "    me.getForm().findField('objectNames').setValue(data.records[0].data.id);\r",
                    "    var msg = 'Value List: ' + data.records[0].data.record.name.bold() ;\r",
                    "    ccont.update(msg);\r",
                    "    return true;\r",
                    "\r",
                    "  } //eo notifyDrop\r",
                    "}); //eo propertydd"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "designerId": "7239d61e-9dc6-404e-ba5e-86786843494e"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onReset",
                "implHandler": [
                    "var me = this;\r",
                    "win = me.up('window');\r",
                    "win.fireEvent('reset', me);"
                ]
            },
            "designerId": "fbb35171-3dd9-45ca-bcd4-46f620a9bae0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onSave",
                "implHandler": [
                    "var me = this;\r",
                    "var win = me.up('window');\r",
                    "var form = me.getForm();\r",
                    "\r",
                    "form.submit({\r",
                    "  waitMsg: 'Saving Data...',\r",
                    "  success: function (result, request) {\r",
                    "    win.fireEvent('save', me);\r",
                    "  },\r",
                    "  failure: function (result, request) {\r",
                    "    var message = 'Failed to Map ValueList to RoleMap';\r",
                    "    showDialog(400, 100, 'Warning', message, Ext.Msg.OK, null);\r",
                    "  }\r",
                    "});"
                ]
            },
            "designerId": "53066816-d4e9-4e41-834d-5a2cbdcf86d2"
        },
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "anchor": "100%",
                "html": [
                    "Drop a Property Node here."
                ],
                "itemId": "mvlfpcontainer",
                "style": [
                    "border:1px silver solid;margin:5px;padding:8px;height:40px"
                ],
                "styleHtmlContent": true,
                "anchorSize": null
            },
            "designerId": "afb8c092-88cb-4d3c-ab52-a2a069a19526",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "anchor",
                    "type": "string"
                }
            ]
        },
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "anchor": "100%",
                "height": null,
                "html": [
                    "Drop a ValueList Node here."
                ],
                "itemId": "mvlfccontainer",
                "style": [
                    "border:1px silver solid;margin:5px;padding:8px;height:40px"
                ],
                "styleHtmlContent": true,
                "width": null
            },
            "designerId": "13f66bcb-80df-4c8c-a053-b91315952c53",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "anchor",
                    "type": "string"
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "updateDDContainers",
                "designer|params": [
                    "record"
                ],
                "implHandler": [
                    "var me = this;\r",
                    "var pcon = me.down('#propertycontainer');\r",
                    "var ccon = me.down('#classcontainer');\r",
                    "var identifier, label;\r",
                    "if(record.record) {\r",
                    "  identifier = getLastXString(record.record.classTemplateMaps[0].classMap.identifiers[0], 1).split('.')[1];\r",
                    "  label = record.record.classTemplateMaps[0].classMap.name;\r",
                    "} else {\r",
                    "  return true;\r",
                    "}\r",
                    "identifier = 'Property: ' + identifier;\r",
                    "pcon.update(identifier);\r",
                    "\r",
                    "var classlabel = 'Value List: ' + label;\r",
                    "ccon.update(classlabel);"
                ]
            },
            "designerId": "0b2aafdd-8c9f-422e-adbe-8c5fec961a32"
        }
    ]
}